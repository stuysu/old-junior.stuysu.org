const CreateError=(e,r)=>({status:Number(e),error:!0,message:r}),{Analytics:Analytics}=require("../models"),analytics=async e=>{let r=await Analytics.findByPk(e);null===r?Analytics.create({url:e,views:1,tracking:!0}):r.tracking&&Analytics.increment("views",{where:{url:e}})},analyticsOn=(e,r)=>async(a,t,i)=>{try{analytics(e),r(a,t,i)}catch(e){i(CreateError(500,e.message))}},isMobile=e=>e.originalUrl.startsWith("/mobile"),addModule=(e,r)=>{for(let a in r)e[a]=r[a];return e};module.exports={CreateError:CreateError,analyticsOn:analyticsOn,isMobile:isMobile,addModule:addModule};
